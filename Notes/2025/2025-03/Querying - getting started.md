---
title: "Querying - getting started"
source: "https://catalog.us-east-1.prod.workshops.aws/event/dashboard/en-US/workshop/aws-native/logs/logsinsights/start"
author:
published:
created: 2025-03-28
description: "Discover and participate in AWS workshops and GameDays"
tags:
  - "clippings"
---
Let's explore these basic query types:

- The default query.
- Find messages containing text (using `filter` ).
- Count events (using `stats` ) and view the results as a time chart. We will run a query in each category, explain what it does, and see what the results look like.
[

### The default query

](https://catalog.us-east-1.prod.workshops.aws/event/dashboard/en-US/workshop/aws-native/logs/logsinsights/#the-default-query)
1. In the AWS Management Console on the Services menu, click **CloudWatch**.
2. In the left navigation menu under **Logs**, click on **Logs Insights**.
3. From the **Select log group(s)** drop down, select the `/ecs/PetListAdoptions` log group.

![[Pasted image 20250328193145.png]]

You will see that a sample query is automatically placed in the query field.

This query performs the following operations:

- display the timestamp and message using the `fields` command,
- `sort` by the timestamp in descending ( `desc` ) order, and then
- `limit` the display to the last 10000 results.

This is always a good starting point to see what the log events look like in your log group(s).

Fields prefixed with @

Fields prefixed with "@" are [automatically generated by CloudWatch](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/CWL_AnalyzeLogData-discoverable-fields.html). The `@message` field contains the raw unparsed log event.

1. Click on **Run query** and view the results.

![[Pasted image 20250328193158.png]]

At the top, you will see a histogram showing the time distribution of matching log events.

Underneath you can see the events that match your query. You can click on the arrow on the left of each line to expand the event. Since the event is in JSON format, it's displayed as a list of field names with their corresponding values. For example, in the expanded event, I see I have a field called *petcolor*, and it has a value of *white*.

[

### Find messages containing text

](https://catalog.us-east-1.prod.workshops.aws/event/dashboard/en-US/workshop/aws-native/logs/logsinsights/#find-messages-containing-text)

Use the `filter` command to specify which log events to work with.

The `filter` command can be used to specify an exact match on a field, that the event contains the specified text, add conditions on numeric fields, check if a field is present, and more.

More on the query syntax

For more information see the AWS documentation on [CloudWatch Logs Insights query syntax](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/CWL_QuerySyntax.html).

1. Copy the query below and paste it into the query editor.

This query applies a filter on the messages and fetches only the records that contain the string `brown` in the log (in the `@message` field).

It also sorts the events which are found is descending time order, and returns only 20 of these.

1. Click on **Run query**.

![Log Results5](https://static.us-east-1.prod.workshops.aws/72c80ac7-9423-4bc3-9bde-25479f8ef882/static/images/logsinsights/results-filter-brown-01.png?Key-Pair-Id=K36Q2WVO3JP7QD&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9zdGF0aWMudXMtZWFzdC0xLnByb2Qud29ya3Nob3BzLmF3cy83MmM4MGFjNy05NDIzLTRiYzMtOWJkZS0yNTQ3OWY4ZWY4ODIvKiIsIkNvbmRpdGlvbiI6eyJEYXRlTGVzc1RoYW4iOnsiQVdTOkVwb2NoVGltZSI6MTc0Mzc1NjI2OH19fV19&Signature=XRBsAedHYWxOtTFVK2z%7EYS7QJoAjx7Jwgqq9wh-iZOUO3nsFbjIZRdpzKlptpU%7En310o1uNIYMtNIs-n32q%7EYN5XVUwZQ1W-UNbx1N6RXwWEVLR2NgIfnI0s0PnYFddhozSuqVOcv1ZOwdZYJvbKR8xqKX2BA7sjDvjX55Uk0OphGVv%7EkPfy4zJCnh-IS74bTIYmMKgcWbiiQPp8Y8oJormYhcdliD9vCck3VG8ZHHNc-SmM7ys64tkSeC8SjbHwTGh4fIed0XzIwACV4M07vvVb20Kf%7EgqslEFHqvCbV6C2zI5HzrFhfv1Um8hzh8J820GIgnNINGSDc-qeZRKMRg__)

[

### Count events and view the results as a time chart

](https://catalog.us-east-1.prod.workshops.aws/event/dashboard/en-US/workshop/aws-native/logs/logsinsights/#count-events-and-view-the-results-as-a-time-chart)

We can use the `stats` command to aggregate data.

The `stats` command counts events or calculate statistics on specific fields, like average, sum, max, min and more.

More on the query syntax

For more information see the AWS documentation on [CloudWatch Logs Insights query syntax](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/CWL_QuerySyntax.html).

1. Delete the query that is already in the query editor and copy and paste in the following query:

This query returns a result that is the count of the number of messages captured in 5 minute buckets/bins.

1. You can also visualize the results by clicking on the **Visualization** tab in the results area as shown below.

Notice that you can also add the visualization to a CloudWatch Dashboard.

![[Pasted image 20250328193237.png]])